name: cover
description: A simple and efficient tool for comprehensive code coverage analysis.
version: 0.3.0
repository: https://github.com/aosorio-avilez/cover

environment:
  sdk: ^3.5.0

dependencies:
  args: ^2.7.0
  cli_completion: ^0.5.1
  dart_console: ^4.1.2
  lcov_parser: ^0.1.2
  path: ^1.9.1
  pubspec_parse: ^1.5.0

dev_dependencies:
  very_good_analysis: ^10.0.0
  test: ^1.28.0
  mocktail: ^1.0.4
  melos: ^7.4.0

executables:
  cover:

workspace:
  - example

melos:
  name: cover
  scripts:
    format:
      run: dart format .
      description: Run dart format for all packages.

    format:check:
      run: dart format --set-exit-if-changed .
      description: Check code formatting for all packages.

    analyze:
      run: dart analyze .
      description: Run static analysis for the entire workspace.

    test:
      run: dart test -j 4 --test-randomize-ordering-seed random
      description: Run unit tests for the cover package.

    coverage:
      run: |
        dart test -j 4 --test-randomize-ordering-seed random --coverage=coverage
        format_coverage --lcov --in=coverage --out=coverage/lcov.info --report-on=lib
      description: Run tests and generate LCOV report for the cover package.

    check-coverage:
      run: dart bin/cover.dart check
      description: Validate coverage thresholds using the locally built tool.
